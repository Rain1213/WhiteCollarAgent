name: Research a stock
description: Collect recent performance, fundamentals, and news for a specified stock ticker and deliver a concise, sourced brief.

goal/outcome:
  - Confirmed ticker, exchange/region (if relevant), and timeframe/scope for the research.
  - Collected key price metrics (recent close, daily/weekly move, 52-week range) and notable fundamentals or ratios when accessible.
  - Summarized 2–4 material recent news items or catalysts with dates and sources.
  - Delivered a concise, source-referenced brief with caveats/assumptions and offers for follow-up.

inputs_params:
  - Required: Stock ticker symbol.
  - Optional: Exchange/region, time horizon (e.g., past week/month), specific focus (earnings, dividends, risk), currency preference, acceptable data sources.

context:
    reasoning:
      - Clarify ticker and region to avoid pulling the wrong company.
      - Choose reliable price/news sources (official exchange data, reputable finance APIs/sites) and favor time-relevant items.
      - Capture both price context and qualitative catalysts for a balanced snapshot.
      - Cite sources and note timestamps/currencies to maintain transparency.
    deadline: {time remaining} left until deadline {deadline in absolute time format}
    definition_of_done(check during final validation step):
      - Ticker confirmed; scope/timeframe understood.
      - Recent price metrics captured with currency and date stamps.
      - 2–4 notable news items summarized with dates and sources.
      - Brief delivered with sources/caveats and invitation to refine.
    avoid:
      - Mixing up tickers/companies or ignoring region differences.
      - Providing stale prices or undated news without flagging.
      - Overstating data certainty when sources are unclear.

steps:
    name: Confirm ticker and scope
    description: Ensure the correct company and research window are set before gathering data.
    action_instruction: Ask for or confirm the ticker, exchange/region if ambiguous, currency preference, and time horizon or focus (e.g., recent move, earnings). Restate confirmed scope and any assumptions back to the user.
    validation_instruction: Check that ticker maps to a known listing; if uncertain, present likely matches and request confirmation.

    name: Plan data sources
    description: Decide where to retrieve price metrics and news.
    action_instruction: Select specific sources (finance APIs, official exchange pages, reputable news/search). Note which actions to use (browser/search/HTTP) and what metrics to pull (recent close, % change, 52-week range, key ratios if available). Document the source plan before fetching.
    validation_instruction: Verify chosen sources support the ticker/region and provide recent timestamps. Adjust plan if coverage or freshness is weak.

    name: Gather price and fundamentals
    description: Retrieve current/recent price context and any accessible fundamentals.
    action_instruction: Query selected sources for latest close/last price, daily/weekly change, 52-week high/low, market cap, P/E or other headline ratios if provided. Record currency, date/time, and source for each metric.
    validation_instruction: Ensure metrics share consistent currency and recent timestamps. Discard stale or conflicting figures, or note discrepancies clearly.

    name: Collect recent news and catalysts
    description: Identify notable events affecting the stock in the chosen window.
    action_instruction: Use search or news sources to find 2–4 recent, material items (earnings, guidance, product launches, regulatory actions). Capture headline, date, short summary, and source link/name.
    validation_instruction: Confirm items fall within the requested timeframe and pertain to the correct company. Remove irrelevant or outdated articles.

    name: Validate overall brief
    description: Check that findings satisfy the definition of done.
    action_instruction: Verify ticker/scope are clear, price metrics have timestamps and currency, news items include dates/sources, and assumptions/caveats are noted. Prepare bullet-ready content for delivery.

    name: Report findings and close
    description: Share results, invite follow-up, and complete the task.
    action_instruction: Send a concise summary covering ticker, price context (with currency/date), key ratios if available, and 2–4 recent news items with dates/sources. State assumptions/limitations, offer further digging if desired, and mark the task completed. Clean up any temporary notes/files if created.
